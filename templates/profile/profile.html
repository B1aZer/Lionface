{% extends 'profile/base.html' %}
{% load media friends format_results %}

{% block css %}
<style>
</style>
{% endblock %}

{% block content_title %} {% endblock %}
{% block content_middle %}{% endblock %}
{% block content_subtitle %}{% endblock %}

{% block dashboard %}
	{% include "profile/dashboard.html" %}
        <div style="position: relative;">
            <form action="." method="post" class="upload_pforile_cover_form" enctype="multipart/form-data" style="display:none" >
                <div style="padding: 4px 8px; background: #EEE; border: 1px solid #FFF; border-width: 1px 3px 3px 3px;">
                {% csrf_token %}
                {{ cover_form.cover_photo.errors }}
                <label for="id_cover_photo" style="margin-right: 10px;">Upload a Cover Photo:</label>
                {{ cover_form.cover_photo }}
                <input id="submit_cover_profile_btn" name="cover_image" type="submit" class="blue_btn" value="Upload" />
                <input id="cancel_cover_profile_btn" type="button" class="blue_btn" value="Cancel" />
                </div>
            </form>
        </div>
{% endblock %}

{% block left_col %}
<!--onclick="window.open('/{{ profile_user.photo }}');return false;"-->
<div class="noPhoto_shadow">
<div {% if profile_user|check_profile_image_visibility:request.user %}
onclick="window.location.href = '{% url profile.views.images profile_user.username %}';return false;"
{% endif %}
	class="noPhoto" style="background: url('/{{ profile_user.photo.thumb_name }}') #FFF; -webkit-background-size: 190px 192px; -moz-background-size: 190px 192px !important; background-size: 190px 192px; background-position: center center; background-repeat: no-repeat;">
		{% if request.user == profile_user %}
		<div style="position: relative; top: 165px; display: block; width: 200px;" align="center">
			<a id="upload_picture" class="upload" style="display:none;">Upload</a>
			<a href="{% url profile.views.images_reset username=request.user.username %}" id="reset_picture" class="upload" style="display:none; color:#555;">Clear</a>
		</div>
		{% endif %}
</div></div>
{% if request.user == profile_user %}
<div style="position: relative;">
<form action="." method="post" class="upload_form" enctype="multipart/form-data" style="display:none;">
	{% csrf_token %}
	{{ form.image.errors }}
	<p><label for="id_photo">Upload</label></p>
	{{ form.image }}
	<p>
		<input id="submit_img_btn" name="image" type="submit" class="blue_btn" value="Upload" />
		<input id="upload_cancel" type="button" class="blue_btn" value="Cancel" />
	</p>
</form>
</div>
{% endif %}

{% if request.user == profile_user %}
<div class="DoS_profile">This is you.</div>
{% else %}
{% if profile_user|check_message_sending:request.user %}
	{% if profile_user|degree_of_separation:request.user or profile_user|degree_of_separation:request.user == 0 %}
	<div class="DoS_profile">Degree of Separation: {{ profile_user|degree_of_separation:request.user }}</div>
	{% else %}
	<div class="DoS_profile">Degree of Separation: <span title="Unknown">--</span></div>
	{% endif %}

{% endif %}
{% endif %}

<div class="bio">
    {% if profile_user == request.user %}
    <a id="favorite-pages" href="#">Favorite Pages</a>
    {% else %}
    <span>Favorite Pages</span>
    {% endif %}
    <input type="text" class="fav-pages" id="favourite_pages_input" style="display:none"/><a id="add_favourite" class="fav-pages" href="#" style="display:none">Add</a><br /><br />
    {% if profile_user.get_favourite_pages %}
    <div id="favorite-pages-container">
        {% include "profile/profile_favourite_page.html" %}
    </div>
    {% endif %}
    <a id="inter_relation_btn" href="#">Relationship</a><br /><br />
    <select id="inter_relation_select" class="inter-relation" style="display:none">
        <option value='S' selected="">Single</option>
        <option value='D' >Dating</option>
        <option value='E' >Engaged</option>
        <option value='M' >Married</option>
    </select>
    <a id="save_inter_relation" class="inter-relation" href="#" style="display:none">Save</a>
    <input id="inter_relation_input" type="text" style="display:none"/>
    {% if profile_user.get_relation_type == 'single' %} 
        <span>{{ profile_user.get_relation_type }} </span>
    {% endif %}
    {% if profile_user.get_relation_type == 'married' or profile_user.get_relation_type == 'engaged' %} 
        <span>{{ profile_user.get_relation_type }} to {{ profile_user.get_related_person.get_full_name }} </span>
    {% endif %}
    {% if profile_user.get_relation_type == 'dating' %} 
        <span>{{ profile_user.get_relation_type }} {{ profile_user.get_related_person.get_full_name }}</span>
    {% endif %}
<br /><br /> 
Bio<br /><br />
Birthday<br />
DD MM YYYY<br /><br />
Website<br /><br />
</div>
{% endblock %}

{% block right_col %}
{% include_media 'feed.js' %}

<div style="padding: 10px; position: relative; left: 40px;">

	{% if profile_user|has_friend:request.user or request.user == profile_user %}

	<div id="postbox_shadow"><div id="postbox" style="margin-top: 25px;">
		<form id="postform" enctype="multipart/form-data">{% csrf_token %}
			<div style="padding: 10px;" align="center">

				<textarea class="postbox_textarea" name="content" style="line-height:1; font-size: 15px;"></textarea>

				<br />
				<div class="postoptions_container" >
					<table width="100%"><tr>
							<td align="left" style="color: #999; font-size: 8pt;" width="50%">
								<input name="profile_id" type="hidden" value="{{profile_user.id}}" >
									<div style="position: relative; width: 100%; height: 100%;">
										<div style="position: absolute; left: 0px; top: -12px; {% if profile_user|has_friend:request.user %} display:none {% endif %}">
										{% if profile_user|has_friend:request.user %}
											<div class="post_option">
												<input name="type" type="radio" value="P" id="checkbox1" name="public" style="cursor: pointer;">
											<label for="checkbox1" style="cursor: pointer;"> Public</label></div>
											<div class="post_option">
												<input name="type" type="radio" value="F" checked id="checkbox" style="cursor: pointer;">
											<label for="checkbox" style="cursor: pointer;"> Friends</label>
												</div>
										{% else %}
											{% if request.user|check_option:"posting_default" == "Friends Only" %}
												<div class="post_option">
													<input name="type" type="radio" value="P" id="checkbox1" name="public" style="cursor: pointer;">
													<label for="checkbox1" style="cursor: pointer;"> Public</label>
												</div>
												<div class="post_option">
													<input name="type" type="radio" value="F" checked id="checkbox" style="cursor: pointer;">
													<label for="checkbox" style="cursor: pointer;"> Friends</label>
												</div>
											{% else %}
												<div class="post_option">
													<input name="type" type="radio" value="P" checked id="checkbox1" name="public" style="cursor: pointer;">
													<label for="checkbox1" style="cursor: pointer;"> Public</label>
												</div>
												<div class="post_option">
													<input name="type" type="radio" value="F" id="checkbox" style="cursor: pointer;">
													<label for="checkbox" style="cursor: pointer;"> Friends</label>
												</div>
											{% endif %}
										{% endif %}
											</div>
										</div>
									</div>
							</td>
								<td align="right">
									<span class="post_feature_container">
										<span onMouseOver="ShowContent('tags'); return false;" onMouseOut="HideContent('tags'); return false;">#</span>
										<span onMouseOver="ShowContent('embed'); return false;" onMouseOut="HideContent('embed'); return false;">embed</span>
										<span  onMouseOver="ShowContent('href'); return false;" onMouseOut="HideContent('href'); return false;">href</span></span>
										<div class="attach" onclick="LionFace.Profile.attach_image(event)">Attach</div>
										<div style="position: relative; display: inline-block;">
											<div class="post_feature" style="display: none;" id="tags">Use the hashtag symbol (#) to create tags.</div>
											<div class="post_feature" style="display: none;" id="embed">Copy and paste links from sites like Youtube and Vimeo and videos will embed once you submit your post. We also support TED.com videos.</div>
											<div class="post_feature" style="display: none;" id="href">Use standard HTML a href code to create links within your post.</div>
										</div>
								<a href="#" class="post" id="postboxbutton">Post</a>
							</td>
				</tr></table>
				</div>
			</div>
			<div id="attached-images" class="image_container_attach">
				<ul>
					{% comment %}
<li><input class="attach-image-file" type="file" name="image" style="display: none;">                     <div id="image_settings" class="feed">                         <a href="#" id="fullsize" style="float: left;" title="Make full-size in the post">+</a>                         <a href="#" id="delete" style="float: right;" title="Delete Photo">x</a>                     </div>                     <img src="/uploads/images/alex_po_p_115.thumb.jpg" width="189" height="142"></li>
					{% endcomment %}
				</ul>
			</div>
		</form>
	</div></div>
	{% endif %}
</div>
	<div id="news_feed" class="{type: 'profile', user: {{ profile_user.id }}}"></div>
</div>

{% include_media 'profile.js' %}

{% endblock %}
