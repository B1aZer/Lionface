{% extends 'profile/base.html' %}
{% load media friends format_results %}

{% block content_title %}{{ profile_user.first_name }} {{ profile_user.last_name }} | Profile{% endblock %}
{% block content_middle %}
{% if profile_user|check_friends_visibility:request.user %}
<a href="{% url profile.views.related_users username=profile_user.username %}?Friends" >{{ profile_user|show_friend_count }}</a>
{% endif %}
{% if profile_user|check_follower_visibility:request.user %}
<span style="color: transparent;">| |</span> <a href="{% url profile.views.related_users username=profile_user.username %}?Followers" >{{ profile_user.followers.count }} Follower{{ profile_user.followers.count|pluralize }}</a>
{% endif %}
{% if profile_user|check_following_visibility:request.user %}
<span style="color: transparent;">| |</span> <a href="{% url profile.views.related_users username=profile_user.username %}?Following" >{{ profile_user.following.count }} Following</a>
{% endif %}
{% endblock %}
{% block content_subtitle %}
{% if request.user == profile_user %}
{% elif profile_user|has_friend:request.user %}
	<a href="#" class="profile_nav link-remove-friend { user: '{{ profile_user.id }}' }" style="color: #999; margin: 0px;">- Remove</a>
{% elif profile_user|has_friend_request:request.user %}
	<span style="color: #999; margin: 0px;" >Friend request pending.</span>
{% elif profile_user|in_followers:request.user %}
    {% if profile_user|check_friend_request:request.user %} 
	<a class="profile_btn link-add-friend { user: '{{ profile_user.id }}' }" style="cursor: pointer;">+ Add</a>
    {% endif %}
	<a class="profile_btn link-unfollow { user: '{{ profile_user.id }}' }" style="cursor: pointer;" >- Unfollow</a>
{% else %}
    {% if profile_user|check_friend_request:request.user %} 
	<a class="profile_btn link-add-friend { user: '{{ profile_user.id }}' }" style="cursor: pointer;">+ Add</a>
    {% endif %}
    {% if profile_user|check_following:request.user %} 
	<a class="profile_btn link-follow { user: '{{ profile_user.id }}' }" style="cursor: pointer;" >+ Follow</a>
    {% endif %}
{% endif %}
{% endblock %}

{% block left_col %}
<div  onclick="window.open('/{{ profile_user.photo|format_image:request.get_full_path }}');return false;" 
	class="noPhoto" style="background-image: url('/{{ profile_user.photo|format_image:request.get_full_path }}'); background-size: 200px 200px;">
		{% if request.user == profile_user %}
        <div style="position: relative; top: 165px; display: block; width: 200px;" align="center">
            <a id="upload_picture" class="upload" style="display:none;">Upload</a><a href="{% url profile.views.reset_picture %}" id="reset_picture" class="upload" style="display:none; color:#555;">Reset</a>
        </div>
        {% endif %}
    
</div>

{% endblock %}

{% block right_col %}

  {% include_media 'profile.js' %}
{% endblock %}
