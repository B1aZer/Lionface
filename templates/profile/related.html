{% extends 'profile/base.html' %}
{% load media friends format_results %}

{% block content_title %}{{ profile_user.first_name }} {{ profile_user.last_name }} | Profile{% endblock %}
{% block content_middle %}
{% if profile_user == user %}
<span style="font-size: 8pt; color: #999; margin-right: 4px; padding: 8px;">{{ user|show_friend_count }}</span>
<span style="color: transparent;">| |</span> <span style="font-size: 8pt; color: #999; margin-right: 4px; padding: 8px;">{{ user.followers.count }} Follower{{ user.followers.count|pluralize }}</span>
<span style="color: transparent;">| |</span> <span style="font-size: 8pt; color: #999; margin-right: 4px; padding: 8px;">{{ user.following.count }} Following</span>
{% endif %}
{% endblock %}
{% block content_subtitle %}
{% if request.user == profile_user %}
<span class="subtitle_username">{{ profile_user.username }}</span>
{% elif profile_user|has_friend:request.user %}
	<span class="subtitle_username">{{ profile_user.username }}</span>
	<a href="#" class="profile_nav link-remove-friend { user: '{{ profile_user.id }}' }" style="color: #999; margin: 0px; font-size: 8pt;">- Remove</a>
{% elif profile_user|has_friend_request:request.user %}
	<span class="subtitle_username">{{ profile_user.username }}</span>
	<span class="subtitle_username">Friend request pending.</span>
{% elif profile_user|in_followers:request.user %}
    {% if profile_user|check_friend_request:request.user %} 
	<span  class="subtitle_username" style="position: relative; top: -3px;">{{ profile_user.username }}</span>
	<a class="profile_btn link-add-friend { user: '{{ profile_user.id }}' }" style="cursor: pointer;">+ Add</a>
    {% endif %}
	<a class="profile_btn link-unfollow { user: '{{ profile_user.id }}' }" style="cursor: pointer;" >- Unfollow</a>
{% else %}
    {% if profile_user|check_friend_request:request.user %} 
	<span  class="subtitle_username" style="position: relative; top: -3px;">{{ profile_user.username }}</span>
	<a class="profile_btn link-add-friend { user: '{{ profile_user.id }}' }" style="cursor: pointer;">+ Add</a>
    {% endif %}
    {% if profile_user|check_following:request.user %} 
	<a class="profile_btn link-follow { user: '{{ profile_user.id }}' }" style="cursor: pointer;" >+ Follow</a>
    {% endif %}
{% endif %}
{% endblock %}

{% block left_col %}
<div  onclick="window.location.href = '{% url profile.views.profile profile_user.username %}';return false;" 
    class="noPhoto" style="background-image: url('/{{ profile_user.photo|format_image:request.get_full_path }}'); background-size: 200px 200px;"></div>

    <div style="position: relative; left: 0px; z-index: 100;">
    {% if profile_user|check_friends_visibility:request.user %}
    <a href="javascript:;" class="feed_type filter related" >Friends</a>
    {% endif %}
    {% if profile_user|check_follower_visibility:request.user %}
    <a href="javascript:;" class="feed_type filter related" >Followers</a>
    {% endif %}
    {% if profile_user|check_following_visibility:request.user %}
    <a href="javascript:;" class="feed_type filter related" >Following</a>
    {% endif %}
	</div>   

{% endblock %}

{% block right_col %}
<div id="related_users" style="padding: 10px; position: relative; left: 40px;">

    {% include "profile/related_users.html" %}

</div>

  {% include_media 'profile.js' %}
  {% include_media 'related.js' %}
{% endblock %}
