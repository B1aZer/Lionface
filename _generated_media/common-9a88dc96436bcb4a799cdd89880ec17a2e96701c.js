function hookLinks(){$(".link-add-friend").unbind("click");$(".link-add-friend").click(function(){var b=$(this).metadata();var c=$(this);if(b.user!==undefined){c.unbind("click");var a=c.html();c.append('<div class="link_loader"></div>');$.ajax("/account/friend/add/",{type:"GET",data:"user="+encodeURIComponent(b.user),success:function(d){c.html(a);if(d.status=="OK"){c.html("Friend request sent.")}},error:function(){hookLinks();c.html(a)}})}return false});$(".link-accept-friend").unbind("click");$(".link-accept-friend").click(function(){var c=$(this).metadata();var d=$(this);if(c.request!==undefined){d.unbind("click");var a=d.closest(".link-output");var b=a.html();a.html('<div class="link_loader"></div>');$.ajax("/account/friend/accept/"+c.request+"/",{type:"GET",success:function(e){a.html(b);if(e.status=="OK"){a.html("Friend request accepted.")}},error:function(){a.html(b);hookLinks()}})}return false});$(".link-decline-friend").unbind("click");$(".link-decline-friend").click(function(){var c=$(this).metadata();var d=$(this);if(c.request!==undefined){d.unbind("click");var a=d.closest(".link-output");var b=a.html();a.html('<div class="link_loader"></div>');$.ajax("/account/friend/decline/"+c.request+"/",{type:"GET",success:function(e){a.html(b);if(e.status=="OK"){a.html("Friend request declined.")}},error:function(){a.html(b);hookLinks()}})}return false})}$(function(){hookLinks()});